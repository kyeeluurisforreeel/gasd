<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login - GB ChatApp</title>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-center h-screen">
  <h1 class="text-3xl font-bold mb-6">Sign in with Google</h1>
  <button id="googleSignIn" class="bg-indigo-600 px-6 py-3 rounded hover:bg-indigo-500">Sign in with Google</button>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBR5XGFk0HPfA2IdWWoTNtGEPc5Tsxikig",
      authDomain: "gbchatapp-35731.firebaseapp.com",
      projectId: "gbchatapp-35731",
      storageBucket: "gbchatapp-35731.firebasestorage.app",
      messagingSenderId: "235147261711",
      appId: "1:235147261711:web:d8f393a788b2b854a8b07a",
      measurementId: "G-4JCCY36L82"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    document.getElementById('googleSignIn').addEventListener('click', () => {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
        .then(() => {
          // Open a cloaked about:blank window
          const cloakedWindow = window.open('about:blank', '_blank', 'width=1000,height=700');

          // Once the window is opened, navigate it to chat.html
          cloakedWindow.location.href = 'chat.html';
        })
        .catch(err => alert(err.message));
    });
  </script>
</body>
</html>
